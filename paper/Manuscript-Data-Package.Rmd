---
title: "canaccessR: An open data product for analyzing transportation accessibility to employment and grocery stores in Canada’s largest metropolitan areas."
author:
  - name: João Pedro Figueira Amorim Parga
    email: joao.parga@mail.utoronto.ca
    affil-id: 1
    orcid: 0000-0002-4105-5927
    footnote: 1
  - name: Anastasia Soukhov
    email: soukhoa@mcmaster.ca
    affil-id: 2
    orcid: 0000-0003-4371-4831
  - name: Robert Nutifafa Arku
    email: rn.arku@mail.utoronto.ca
    affil-id: 1
    orcid: 0000-0002-2018-886X
  - name: Christopher Higgins
    email: cd.higgins@utoronto.ca
    affil-id: 3
    orcid: 0000-0002-3551-7750
  - name: Antonio Páez
    email: paezha@mcmaster.ca
    affil-id: 2
    orcid: 0000-0001-6912-9919
affiliations:
  - id: 1
    name: University of Toronto
  - id: 2
    name: McMaster University
  - id: 3
    name: University of Toronto Scarborough
# address:
#   - code: CODE
#     address: "Some school"
footnote:
  - code: 1
    text: "Corresponding Author"
abstract: 
  "In this paper, we describe the {canaccesR} package, an open data product (ODPs) created using the R statistical language. {canaccess} is a data package that provides public transit travel time estimates (travel time matrices - TTM) to employment locations and grocery stores across the 12 largest Canadian metropolitan areas. We calculate these estimates for each Dissemination Area (DA) within these regions for the years 2019 and 2023. To do so, we use the {r5r} R package, General Transit Feed Specification (GTFS), OpenStreetMap (OSM), DMTI’s Enhanced Points of Interest, and Statistics Canada Census data. This data package can be used by researchers, practitioners, and transit agencies to estimate accessibility to essential services across these regions. These estimates can be used to compare different regions across Canada in terms of their accessibility and to conduct within-region equity assessments regarding access to services, which can inform improvements in transportation policies related to accessibility. The package is still in its initial phase and may undergo expansions in the future by adding TTM's for other destinations (e.g., schools, healthcare facilities). Finally, as an ODPs, the {canaccess} package allows for open exploration, use, and contribution by users through its GitHub repository." 
    
keywords: Accessibility; public transit; open data products (ODPs); travel time; employment; grocery stores.
classoption:
  - Royal
  - times
bibliography: bibfile.bib
bibliographystyle: sageh
output:
  rticles::sage_article:
    keep_tex: yes
editor_options: 
  markdown: 
    wrap: 72
---

```{r knitr-setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  cache = FALSE,
  warning = FALSE,
  comment = '', 
  out.width = "1\\linewidth")

knitr::knit_hooks$set(inline = function(x) {
  if (is.numeric(x)) {
    format(x, big.mark = ",", scientific = FALSE)
  } else {
    x
  }
})

opts <- options(knitr.kable.NA = "")
```

```{r install-data-package, include=FALSE}
if (!require("canaccessR", character.only = TRUE)) {
      remotes::install_github("paezha/canaccessR",
                        build_vignettes = TRUE)
}

rm(list=ls())
```

```{r load-packages, include=FALSE, cache=FALSE}
# Load packages

```

```{r load-data, include = FALSE}

```

# Introduction

The objective of this paper is to describe the {canaccesR} open data package.
Its main contents are a set of public transit travel time matrices (TTM) estimates to employment and groceries stores from the 12 largest Canadian metropolitan areas in the years 2019 and 2023.
These estimates were created by leveraging expertise in data science, computer programming, and transportation accessibility, using the {r5r} R package [@pereiraR5rRapidRealistic2021].
We used transport and street network, population, and employment data from different sources to estimate these TTM's datasets.


Estimating accessibility - the potential offered by the transportation system to reach destinations [@paezMeasuringAccessibilityPositive2012] - requires specialized datasets and technical expertise.
Despite recent advancements in the field, ready-to-use available data on transportation accessibility is still sparse.
Thus, we leverage technical knowledge to make publicly available ready-to-use data on transportation accessibility.
To create the package, we integrated and processed raw data from diverse sources, estimated TTM's for two destinations types (e.g., jobs and groceries) across the largest cities in the country, and distributed these findings through this transparent and open source data product.
Our main contribution is to provide analysis-ready data for Canada's largest cities, thus making the fields of accessibility research and urban analytics more accessible.


The package's main audiences are Canadian researchers in urban planning and transportation and transportation system agencies.
We anticipate three main uses for the open data product (ODP) described in this paper.
First, the datasets allow for static assessment of the level of public transit accessibility across the country's largest cities before and after the COVID-19 pandemic.
In other words, we make it easier for those interested to compare cities and their level of public transit accessibility to essential destinations (such as employment centers and groceries stores).
Second, researchers can use the package's information as inputs to evaluate changes in accessibility throughout this period. 
Researchers may also investigate disparities in these changes across space within those cities, given the spacial character of the datasets made available here.
Third, as is common practice in transportation accessibility research, these evaluations can substantiate broader investigations on matters of justice and equity in transportation.
For example, the TTM estimates allow for evaluating the evolution of public transit's accessibility by income or spatial distribution across all Dissemination Areas (DA's) of each of the 12 cities in the sample [@pargaDemocraticAccessOur2024].


Besides this introduction, we organize this paper as follows. 
The next section contains a description of the data sources we used to construct the data package.
Then, we recount the data processing necessary to create the package.
Next, we go through the main contents of the data package, i.e., the travel time matrices estimated through our analysis.
We present some basic descriptive statistics of these datasets, and elucidate how one can use them in accessibility analysis. 
Finally, we conclude by explaining how we expect {canaccesR} to contribute to the urban analytics and science community.

# Data Sources

The locations included in the data package comprise the 12 largest (population-wise) Census metropolitan areas (CMA's) based on the 2021 Canadian Census [@governmentofcanada2021CensusPopulation2021] [^1], which are Toronto, Montreal, Vancouver, Ottawa-Gatineau, Calgary, Edmonton, Quebec City, Winnipeg, Hamilton, Kitchener-Cambridge-Waterloo, London, and Halifax.

[^1]: We included Oshawa, Ontario, as part of the Greater Toronto Area (GTA) because of the former's proximity to the latter. We also included Abbotsford-Mission, British Columbia, as part of the Vancouver metropolitan area because of the former's proximity to a transit station on the region’s West Coast Express commuter rail line.


We used four main data sources to construct the {canaccesR} data package: General Transit Feed Specification (GTFS), OpenStreetMap (OSM), DMTI’s Enhanced Points of Interest, and Statistics Canada Census data.



<!-- ## General Transit Feed Specification -->
The GTFS files from the transit agencies from all the related areas provided the information on public transit schedule and their changes from 2019 to 2023.


<!-- ## OpenStreetMaps -->
The OpenStreetMap data provided information on the transit network and was necessary for the routing used to estimate the travel time matrices.

<!-- ## Census Data -->
The 2016 and 2021 Statistics' Canada Census data provided the information on the spatial distribution of the population and the number of workplace locations, which represent the quantity of employment across the CMA's [@governmentofcanada2016CensusPopulation2016, governmentofcanada2021CensusPopulation2021].
All of the resulting travel time matrices were aggregated at the Dissemination Area (DA) level, which comprise the fundamental unit of analysis in data package.


<!-- ## DMTI’s Enhanced Points of Interest -->
The DMTI’s Enhanced Points of Interest

# Data processing

Routing, cleaning, etc. 

# {canaccessR}'s contents

The main contents of the {canaccessR} package are the travel time matrices estimates for all the 12 largest Canadian cities. 


Other sets of data are also available at the {canaccessR} package besides the travel time matrices.
These are the boundaries, socio-economic and demographic data (e.g., population, number of dwellings, number of individuals below the Low Income Measure, etc.) of the selected CMA's, disaggregated by DA.
In addition, the package also contains aggregated population statistics (for the selected CMA's) and transit revenue and ridership data aggregated by regional and national scale.

## Descriptive statistics

Below, we present some of the basic statistics of 

<!--
# Python integration

Possibly provide a Jupyter Notebook containing a Python script to demonstrate how to read R data files (.rda) and convert them into Pandas DataFrames.

-->

# How to use {canaccessR}

This section presents some potential applications of the data package.


# Concluding remarks

In this paper, we describe the {canaccesR} data package, created using the {r5r} R package and transit schedule, street network, employment, and population data.
The package's main contents refers to the ready-to-use travel time matrices for public transit to reach employment and groceries stores in Canada's 12 largest urban areas.
We expect the contents of the package to be used in transportation accessibility evaluations within and across those regions.
Moreover, these datasets can be used in further equity assessments that evaluate the distribution of accessibility across space and between social groups.
In other words, we hope that by making these datasets publicly available, future analysis can contribute to making Canada's transportation system more just and fair, considering accessibility's as the main social good of transportation [MARTENS JUSTICE], and the inherent connection between public transit and the "right to the city" [COGGIN].


<!-- In conclusion, we argue that the {canaccesR} package adds  -->

<!-- In this sense, the package fulfill one of the main tenets of ODPs products by combining expertise in data science, transportation accessibility, and demographics and generating a set of useful and ready-to-use data vital to estimating transportation accessibility, rather than simply making raw data available. -->
<!-- In other words, the travel time matrics presented by this  -->


<!-- value to the urban analytics and science community by  -->

<!-- We expect the package to have two main contribu -->
<!-- The main contribution from the {canaccesR} package is the  -->

<!-- Finally, we expect that this data package can substantiate accessibility analysis across Canada. -->


# Declaration of Conflicting Interests

The author(s) declared no potential conflicts of interest with respect
to the research, authorship, and/or publication of this article.

# Funding

The author(s) disclosed receipt of the following financial support for
the research, authorship, and/or publication of this article: This work
was supported by the Social Sciences and Humanities Research Council of
Canada (*More description about the funding source after the review
process*).

# ORCID

  - name: João Pedro Figueira Amorim Parga
    orcid: 0000-0002-4105-5927
  - name: Anastasia Soukhov
    orcid: 0000-0003-4371-4831
  - name: Robert Nutifafa Arku
    orcid: 0000-0002-2018-886X
  - name: Christopher Higgins
    orcid: 0000-0002-3551-7750
  - name: Antonio Páez
    orcid: 0000-0001-6912-9919


# Data availability statement

The {canaccessR} data package can be found and installed on its Github [respository](https://github.com/paezha/canaccessR).

# References {#references .unnumbered}
